(this["webpackJsonpto-dos-redux-tutorial"]=this["webpackJsonpto-dos-redux-tutorial"]||[]).push([[0],{1114:function(e,t){},1117:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(18),c=n.n(o),l=n(2),s=(n(59),n(5)),u=n.n(s),i=n(10),d=n(13),f=n(6),m=n(19),p=n(8),v=n(48),b=["body"];function h(e){return E.apply(this,arguments)}function E(){return(E=Object(i.a)(u.a.mark((function e(t){var n,a,r,o,c,l,s,i=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},a=n.body,r=Object(v.a)(n,b),o={"Content-Type":"application/json"},c=Object(p.a)(Object(p.a)({method:a?"POST":"GET"},r),{},{headers:Object(p.a)(Object(p.a)({},o),r.headers)}),a&&(c.body=JSON.stringify(a)),e.prev=4,e.next=7,window.fetch(t,c);case 7:return s=e.sent,e.next=10,s.json();case 10:if(l=e.sent,!s.ok){e.next=13;break}return e.abrupt("return",l);case 13:throw new Error(s.statusText);case 16:return e.prev=16,e.t0=e.catch(4),e.abrupt("return",Promise.reject(e.t0.message?e.t0.message:l));case 19:case"end":return e.stop()}}),e,null,[[4,16]])})))).apply(this,arguments)}h.get=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return h(e,Object(p.a)(Object(p.a)({},t),{},{method:"GET"}))},h.post=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return h(e,Object(p.a)(Object(p.a)({},n),{},{body:t}))};var g,y={All:"all",Active:"active",Completed:"completed"},O={status:y.All,colors:[]},j=Object(f.d)({name:"filters",initialState:O,reducers:{statusFilterChanged:function(e,t){e.status=t.payload},colorFilterChanged:{reducer:function(e,t){var n=t.payload,a=n.color,r=n.changeType,o=e.colors;switch(r){case"added":o.includes(a)||o.push(a);break;case"removed":e.colors=o.filter((function(e){return e!==a}));break;default:return}},prepare:function(e,t){return{payload:{color:e,changeType:t}}}}}}),C=j.actions,k=C.colorFilterChanged,N=C.statusFilterChanged,x=j.reducer,w=Object(f.c)(),T=w.getInitialState({status:"idle"}),S=Object(f.b)("todos/fetchTodos",Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.get("/fakeApi/todos");case 2:return t=e.sent,e.abrupt("return",t.todos);case 4:case"end":return e.stop()}}),e)})))),A=Object(f.b)("todos/saveNewTodo",function(){var e=Object(i.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={text:t},e.next=3,h.post("/fakeApi/todos",{todo:n});case 3:return a=e.sent,e.abrupt("return",a.todo);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),I=Object(f.d)({name:"todos",initialState:T,reducers:{todoAdded:function(e,t){var n=t.payload;e.entities[n.id]=n},todoToggled:function(e,t){var n=t.payload,a=e.entities[n];a.completed=!a.completed},todoColorSelected:{reducer:function(e,t){var n=t.payload,a=n.color,r=n.todoId;e.entities[r].color=a},prepare:function(e,t){return{payload:{todoId:e,color:t}}}},todoDeleted:w.removeOne,allTodosCompleted:function(e,t){Object.values(e.entities).forEach((function(e){e.completed=!0}))},completedTodosCleared:function(e,t){var n=Object.values(e.entities).filter((function(e){return e.completed})).map((function(e){return e.id}));w.removeMany(e,n)},todosLoading:function(e,t){e.status="loading"},todosLoaded:function(e,t){var n={};t.payload.forEach((function(e){n[e.id]=e})),e.entities=n,e.status="idle"}},extraReducers:function(e){e.addCase(S.pending,(function(e,t){e.status="loading"})).addCase(S.fulfilled,(function(e,t){w.setAll(e,t.payload),e.status="idle"})).addCase(A.fulfilled,w.addOne)}}),L=I.actions,F=L.allTodosCompleted,R=L.completedTodosCleared,M=(L.todoAdded,L.todoColorSelected),z=L.todoDeleted,G=L.todoToggled,P=(L.todosLoaded,L.todosLoading,I.reducer),B=w.getSelectors((function(e){return e.todos})),H=B.selectAll,$=B.selectById,D=(Object(m.a)(H,(function(e){return e.map((function(e){return e.id}))})),Object(m.a)(H,(function(e){return e.filters}),(function(e,t){var n=t.status,a=t.colors,r=n===y.All;if(r&&0===a.length)return e;var o=n===y.Completed;return e.filter((function(e){var t=r||e.completed===o,n=0===a.length||a.includes(e.color);return t&&n}))}))),J=Object(m.a)(D,(function(e){return e.map((function(e){return e.id}))})),q=function(){var e=Object(a.useState)(""),t=Object(d.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)("idle"),s=Object(d.a)(c,2),f=s[0],m=s[1],p=Object(l.b)(),v=function(){var e=Object(i.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.trim(),13!==t.which||!a){e.next=7;break}return m("loading"),e.next=5,p(A(a));case 5:o(""),m("idle");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b="loading"===f,h=b?"":"what needs to be done?",E=b?r.a.createElement("div",{className:"loader"}):null;return r.a.createElement("header",{className:"header"},r.a.createElement("input",{className:"new-todo",placeholder:h,autoFocus:!0,value:n,onChange:function(e){return o(e.target.value)},onKeyDown:v,disabled:b}),E)},K=["svgRef","title"];function U(){return(U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Q(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var V=function(e){var t=e.svgRef,n=e.title,a=Q(e,K);return r.a.createElement("svg",U({"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"times",className:"svg-inline--fa fa-times fa-w-11",role:"img",viewBox:"0 0 352 512",ref:t},a),n?r.a.createElement("title",null,n):null,g||(g=r.a.createElement("path",{fill:"currentColor",d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"})))},W=r.a.forwardRef((function(e,t){return r.a.createElement(V,U({svgRef:t},e))})),X=(n.p,["green","blue","orange","purple","red"]),Y=function(e){return e[0].toUpperCase()+e.slice(1)},Z=function(e){var t=e.id,n=Object(l.c)((function(e){return $(e,t)})),a=n.text,o=n.completed,c=n.color,s=Object(l.b)(),u=X.map((function(e){return r.a.createElement("option",{key:e,value:e},Y(e))}));return r.a.createElement("li",null,r.a.createElement("div",{className:"view"},r.a.createElement("div",{className:"segment label"},r.a.createElement("input",{className:"toggle",type:"checkbox",checked:o,onChange:function(){s(G(n.id))}}),r.a.createElement("div",{className:"todo-text"},a)),r.a.createElement("div",{className:"segment buttons"},r.a.createElement("select",{className:"colorPicker",value:c,style:{color:c},onChange:function(e){var t=e.target.value;s(M(n.id,t))}},r.a.createElement("option",{value:""}),u),r.a.createElement("button",{className:"destroy",onClick:function(){s(z(n.id))}},r.a.createElement(W,null)))))},_=function(){var e=Object(l.c)(J);if("loading"===Object(l.c)((function(e){return e.todos.status})))return r.a.createElement("div",{className:"todo-list"},r.a.createElement("div",{className:"loader"}));var t=e.map((function(e){return r.a.createElement(Z,{key:e,id:e})}));return r.a.createElement("ul",{className:"todo-list"},t)},ee=function(e){var t=e.count,n=1===t?"":"s";return r.a.createElement("div",{className:"todo-count"},r.a.createElement("h5",null,"Remaining Todos"),r.a.createElement("strong",null,t)," item",n," left")},te=function(e){var t=e.value,n=e.onChange,a=Object.keys(y).map((function(e){var a=y[e],o=a===t?"selected":"";return r.a.createElement("li",{key:a},r.a.createElement("button",{className:o,onClick:function(){return n(a)}},e))}));return r.a.createElement("div",{className:"filters statusFilters"},r.a.createElement("h5",null,"Filter by Status"),r.a.createElement("ul",null,a))},ne=function(e){var t=e.value,n=e.onChange,a=X.map((function(e){var a=t.includes(e);return r.a.createElement("label",{key:e},r.a.createElement("input",{type:"checkbox",name:e,checked:a,onChange:function(){n(e,a?"removed":"added")}}),r.a.createElement("span",{className:"color-block",style:{backgroundColor:e}}),Y(e))}));return r.a.createElement("div",{className:"filters colorFilters"},r.a.createElement("h5",null,"Filter by Color"),r.a.createElement("form",{className:"colorSelection"},a))},ae=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return H(e).filter((function(e){return!e.completed})).length})),n=Object(l.c)((function(e){return e.filters})),a=n.status,o=n.colors;return r.a.createElement("footer",{className:"footer"},r.a.createElement("div",{className:"actions"},r.a.createElement("h5",null,"Actions"),r.a.createElement("button",{className:"button",onClick:function(){return e(F())}},"Mark All Completed"),r.a.createElement("button",{className:"button",onClick:function(){return e(R())}},"Clear Completed")),r.a.createElement(ee,{count:t}),r.a.createElement(te,{value:a,onChange:function(t){return e(N(t))}}),r.a.createElement(ne,{value:o,onChange:function(t,n){return e(k(t,n))}}))};var re=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("nav",null,r.a.createElement("section",null,r.a.createElement("h1",null,"Sebastian's Redux todo tracker"))),r.a.createElement("main",null,r.a.createElement("section",{className:"medium-container"},r.a.createElement("h2",null,"Stuff to do"),r.a.createElement("div",{className:"todoapp"},r.a.createElement(q,null),r.a.createElement(_,null),r.a.createElement(ae,null)))))},oe=n(11),ce=(n(38),n(30)),le=n.n(ce),se=oe.c.extend({serializeIds:"always"}),ue=le()();var ie=function(e){var t,n;return e[(t=0,n=e.length-1,t=Math.ceil(t),n=Math.floor(n),Math.floor(ue()*(n-t+1))+t)]},de=[{base:"Buy $THING",values:["milk","bread","cheese","toys"]},{base:"Clean $THING",values:["house","yard","bedroom","car"]},{base:"Read $THING",values:["newspaper","book","email"]}];new oe.d({routes:function(){this.namespace="fakeApi",this.timing=2e3,this.resource("todos"),this.resource("lists");var e=this;this.post("/todos",(function(t,n){var a=this.normalizedRequestAttrs();if("error"===a.text)throw new Error("Could not save the todo!");return e.create("todo",a)}))},models:{todo:oe.b.extend({}),list:oe.b.extend({todos:Object(oe.e)()})},factories:{todo:oe.a.extend({id:function(e){return Number(e)},text:function(){return function(){var e=ie(de),t=ie(e.values);return e.base.replace("$THING",t)}()},completed:function(){return!1},color:function(){return""}})},serializers:{todo:se.extend({serialize:function(e,t){var n=function(e){e.id=Number(e.id)},a=se.prototype.serialize.apply(this,arguments);return a.todo?n(a.todo):a.todos&&a.todos.forEach(n),a}}),list:se},seeds:function(e){e.createList("todo",5)}});var fe=Object(f.a)({reducer:{todos:P,filters:x}});fe.dispatch(S()),c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,{store:fe},r.a.createElement(re,null))),document.getElementById("root"))},49:function(e,t,n){e.exports=n(1117)},59:function(e,t,n){}},[[49,1,2]]]);
//# sourceMappingURL=main.8b317929.chunk.js.map